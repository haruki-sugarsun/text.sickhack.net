---
layout: single
title: "2021-08-30 CNAME と TXT の食べ合わせ"
date: "2021-08-31T01:42:11.145Z"
---
<p>
 本サイト <a href="http://text.sickhack.net" data-card-appearance="inline" class="external-link" rel="nofollow">http://text.sickhack.net</a>  ですが、GitHub Pages のために CNAME を <code>github.io.</code>に向けています。
</p>
<p>
 それはいいのですが、Google Search Console とかで DNS でのdomain verificationをしようとして、TXT設定すること、と言われ、素直に <code>txt text google-site-verification=…</code> を設定して、なんか反映されないなーと思って、その日は後でいいやと思って放置しました。
</p>
<p></p>
<p>
 さて、今日になっても反映されておらず、うーん。何か間違えたかなーと、ふと <code>dig</code> って見たら、
</p>
<div>
 <div>
  <pre>$ dig TXT text.sickhack.net
...snip...
;; ANSWER SECTION:
text.sickhack.net.	1019	IN	CNAME	haruki-sugarsun.github.io.</pre>
 </div>
</div>
<p>
 CNAMEしか返ってきてないじゃないですかー とここで、「違う、そうじゃない。」ということがわかりました。
</p>
<p>
 CNAME設定しているときは、他のレコードは使えないんですねというか多分昔同じことしている。。同じことをした跡がある。。
</p>
<p></p>
<ul>
 <li>
  <p>
   <a href="https://tech-initiatives.jp/blog/dns%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E8%A8%AD%E5%AE%9A%E3%80%80cname%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AF%E4%BB%96%E3%81%AE%E6%8C%87%E5%AE%9A%E3%81%A8%E5%90%8C%E6%99%82%E5%88%A9%E7%94%A8/" class="external-link" rel="nofollow">DNSレコード設定 CNAMEレコードは他の指定と同時利用はできません。 | tech-initiatives </a>
  </p>
 </li>
</ul>
<p>
 こちらでお勉強しました。
</p>
<p>
 RFCは <a href="https://www.ietf.org/rfc/rfc1912.txt" class="external-link" rel="nofollow">www.ietf.org/rfc/rfc1912.txt</a> で、該当部は
</p>
<blockquote>
 <p>
  2.4 CNAME records
 </p>
 <p>
  A CNAME record is not allowed to coexist with any other data.
 </p>
</blockquote>
<p>
 とのこと。私の使っているサービスでは入力してもrejectはされず、CNAMEのみ有効になるようでした。毎日勉強。
</p>

