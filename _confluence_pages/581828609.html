---
layout: single
title: "Investigations - WSL2"
date: "2024-04-15T05:39:15.688Z"
toc: true
toc_sticky: true
tags:
---
<h1 id="Investigations-WSL2-Overview">
 Overview
</h1>
<p>
 …
</p>
<p></p>
<p>
 See <a class="external-link" href="https://learn.microsoft.com/ja-jp/windows/wsl/install" rel="nofollow">https://learn.microsoft.com/ja-jp/windows/wsl/install</a> anyway
</p>
<h1 id="Investigations-WSL2-Note">
 Note
</h1>
<p>
 …
</p>
<h1 id="Investigations-WSL2-Tips">
 Tips
</h1>
<p></p>
<p>
 1111 VPN + ping/DNS
</p>
<p>
 <a class="external-link" href="https://github.com/microsoft/WSL/issues/5068" rel="nofollow">https://github.com/microsoft/WSL/issues/5068</a>
</p>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://github.com/MicrosoftDocs/WSL/blob/main/WSL/troubleshooting.md#wsl-has-no-network-connectivity-once-connected-to-a-vpn" rel="nofollow">https://github.com/MicrosoftDocs/WSL/blob/main/WSL/troubleshooting.md#wsl-has-no-network-connectivity-once-connected-to-a-vpn</a>
  </p>
 </li>
</ul>
<h2 id="Investigations-WSL2-MissingVirtualMachinePlatform">
 Missing Virtual Machine Platform
</h2>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://github.com/microsoft/WSL/issues/10755" rel="nofollow">https://github.com/microsoft/WSL/issues/10755</a>
  </p>
 </li>
</ul>
<h2 id="Investigations-WSL2-AdvancedConfig">
 Advanced Config
</h2>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://github.com/MicrosoftDocs/WSL/blob/a18d455b23d51d0bddf4f38a48adc498dc6ce243/WSL/wsl-config.md" rel="nofollow">https://github.com/MicrosoftDocs/WSL/blob/a18d455b23d51d0bddf4f38a48adc498dc6ce243/WSL/wsl-config.md</a>
  </p>
 </li>
</ul>
<h2 id="Investigations-WSL2-v2.0.0">
 v2.0.0
</h2>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://forest.watch.impress.co.jp/docs/news/1532311.html" rel="nofollow">https://forest.watch.impress.co.jp/docs/news/1532311.html</a>
  </p>
 </li>
 <li>
  <p>
   <a class="external-link" href="https://zenn.dev/dozo/articles/dd574ffa43d3f7" rel="nofollow">https://zenn.dev/dozo/articles/dd574ffa43d3f7</a>
  </p>
 </li>
</ul>
<h2 id="Investigations-WSL2-Systemd">
 Systemd
</h2>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://devblogs.microsoft.com/commandline/systemd-support-is-now-available-in-wsl/#set-the-systemd-flag-set-in-your-wsl-distro-settings" rel="nofollow">enable </a><code>systemd</code>
  </p>
 </li>
</ul>
<h2 id="Investigations-WSL2-ClockSkew">
 Clock Skew
</h2>
<ul>
 <li>
  <p>
   merged to <a class="external-link" href="https://github.com/microsoft/WSL/issues/10006" rel="nofollow">https://github.com/microsoft/WSL/issues/10006</a>
  </p>
  <ul>
   <li>
    <p>
     and a fix <a class="external-link" href="https://github.com/microsoft/WSL/issues/8204#issuecomment-1338334154" rel="nofollow">https://github.com/microsoft/WSL/issues/8204#issuecomment-1338334154</a> is mentioned.
    </p>
    <ul>
     <li>
      <p>
       trying <code>chrony</code> <time>2023/06/03</time>
      </p>
     </li>
    </ul>
   </li>
   <li>
    <p>
     <a class="external-link" href="https://github.com/microsoft/WSL/issues/8204" rel="nofollow">https://github.com/microsoft/WSL/issues/8204</a>
    </p>
    <ul>
     <li>
      <p>
       <code>sudo hwclock -s</code>
      </p>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<h2 id="Investigations-WSL2-wslu">
 wslu
</h2>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://github.com/wslutilities/wslu" rel="nofollow">https://github.com/wslutilities/wslu</a>
  </p>
  <ul>
   <li>
    <p>
     <a class="external-link" href="https://wslutiliti.es/wslu/" rel="nofollow">https://wslutiliti.es/wslu/</a>
    </p>
   </li>
   <li>
    <p>
     <a class="external-link" href="https://laboradian.com/try-wslu/" rel="nofollow">https://laboradian.com/try-wslu/</a>
    </p>
   </li>
  </ul>
 </li>
</ul>
<h2 id="Investigations-WSL2-ShrinkVirtualDisk">
 Shrink Virtual Disk
</h2>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://github.com/MicrosoftDocs/WSL/issues/1855" rel="nofollow">https://github.com/MicrosoftDocs/WSL/issues/1855</a>
  </p>
 </li>
 <li>
  <p>
   Maybe older info:
  </p>
  <ul>
   <li>
    <p>
     <a class="external-link" href="https://writeabout.net/2021/10/14/shrink-your-wsl2-virtual-disk-on-windows-home/" rel="nofollow">https://writeabout.net/2021/10/14/shrink-your-wsl2-virtual-disk-on-windows-home/</a>
    </p>
    <ul>
     <li>
      <p>
       DISKPART
      </p>
     </li>
     <li>
      <p>
       optimize-vhd is obsolete?
      </p>
     </li>
    </ul>
   </li>
   <li>
    <p>
     Linux ディストリビューションの .vhdx ファイルとディスク パスを見つける方法 - <a class="external-link" href="https://learn.microsoft.com/ja-jp/windows/wsl/disk-space#how-to-locate-the-vhdx-file-and-disk-path-for-your-linux-distribution" rel="nofollow">https://learn.microsoft.com/ja-jp/windows/wsl/disk-space#how-to-locate-the-vhdx-file-and-disk-path-for-your-linux-distribution</a>
    </p>
   </li>
   <li>
    <p>
     <a class="external-link" href="https://stephenreescarter.net/how-to-shrink-a-wsl2-virtual-disk/" rel="nofollow">https://stephenreescarter.net/how-to-shrink-a-wsl2-virtual-disk/</a>
    </p>
   </li>
   <li>
    <p>
     <a class="external-link" href="https://learn.microsoft.com/ja-jp/powershell/module/hyper-v/optimize-vhd?view=windowsserver2022-ps&amp;viewFallbackFrom=win10-ps" rel="nofollow">https://learn.microsoft.com/ja-jp/powershell/module/hyper-v/optimize-vhd?view=windowsserver2022-ps&amp;viewFallbackFrom=win10-ps</a>
    </p>
   </li>
  </ul>
 </li>
</ul>
<h3 id="Investigations-WSL2-Cheatsheet">
 Cheatsheet
</h3>
<div id="expander-341337198">
 <div id="expander-control-341337198">
  <span>&nbsp;</span><span>ここをクリックすると展開されます...</span>
 </div>
 <div id="expander-content-341337198">
  <div>
   <div>
    <pre>Optimize-VHD -Path "C:\Users\jumpi\AppData\Local\Packages\TheDebianProject.DebianGNULinux_76v4gfsz19hv4\LocalState\ext4.vhdx" -Mode Full</pre>
   </div>
  </div>
 </div>
</div>
<h2 id="Investigations-WSL2-FixingErrors">
 Fixing Errors
</h2>
<ul>
 <li>
  <p>
   ` [プロセスはコード 4294967295 で終了しました] `
  </p>
  <ul>
   <li>
    <p>
     https://ledsun.hatenablog.com/entry/2021/11/17/185248
    </p>
   </li>
   <li>
    <p>
     https://github.com/microsoft/WSL/issues/5092#issuecomment-615545141
    </p>
   </li>
  </ul>
 </li>
</ul>
<h2 id="Investigations-WSL2-UpgradefromDebian10to11">
 Upgrade from Debian 10 to 11
</h2>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://technologydragonslayer.com/2022/03/15/upgrading-wsl2-debian-10-to-11/" rel="nofollow">https://technologydragonslayer.com/2022/03/15/upgrading-wsl2-debian-10-to-11/</a>
  </p>
 </li>
 <li>
  <p>
   <a class="external-link" href="https://zenn.dev/atsushifx/articles/wsl2-debian-apt-upgrade" rel="nofollow">https://zenn.dev/atsushifx/articles/wsl2-debian-apt-upgrade</a>
  </p>
 </li>
</ul>
<p></p>
<h2 id="Investigations-WSL2-Mounting">
 Mounting
</h2>
<ul>
 <li>
  <p>
   Also some info in <a href="/c/629047297/" data-linked-resource-version="1" data-linked-resource-type="page">Investgations - Box.com</a>
  </p>
 </li>
</ul>
<p></p>
<h2 id="Investigations-WSL2-VolumeManagement">
 Volume Management
</h2>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://learn.microsoft.com/en-us/windows/wsl/disk-space" rel="nofollow">https://learn.microsoft.com/en-us/windows/wsl/disk-space</a>
  </p>
 </li>
</ul>
<p></p>
<h2 id="Investigations-WSL2-VPN+NetworkIssues">
 VPN + Network Issues
</h2>
<p>
 <time>2024/04/12</time>
</p>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://zenn.dev/yukikaoru/articles/fix-wsl-network-on-vpn" rel="nofollow">https://zenn.dev/yukikaoru/articles/fix-wsl-network-on-vpn</a>
  </p>
  <ul>
   <li>
    <p>
     <a class="external-link" href="https://github.com/sakai135/wsl-vpnkit/#setup-as-a-standalone-script" rel="nofollow">https://github.com/sakai135/wsl-vpnkit/#setup-as-a-standalone-script</a>
    </p>
   </li>
  </ul>
 </li>
 <li>
  <p>
   Some info found
  </p>
  <ul>
   <li>
    <p>
     <a class="external-link" href="https://gist.github.com/machuu/7663aa653828d81efbc2aaad6e3b1431" rel="nofollow">https://gist.github.com/machuu/7663aa653828d81efbc2aaad6e3b1431</a>
    </p>
   </li>
   <li>
    <p>
     <a class="external-link" href="https://github.com/sakai135/wsl-vpnkit/#setup-as-a-standalone-script" rel="nofollow">https://github.com/sakai135/wsl-vpnkit/#setup-as-a-standalone-script</a>
    </p>
   </li>
   <li>
    <p>
     <a class="external-link" href="https://gist.github.com/mikegerber/91fcea262028e09b2fd0969193c6c260" rel="nofollow">https://gist.github.com/mikegerber/91fcea262028e09b2fd0969193c6c260</a>
    </p>
   </li>
  </ul>
 </li>
</ul>
<h1 id="Investigations-WSL2-Misc">
 Misc
</h1>
<ul>
 <li>
  <p>
   <a class="external-link" href="https://docs.microsoft.com/ja-jp/windows/wsl/tutorials/gui-apps" rel="nofollow">https://docs.microsoft.com/ja-jp/windows/wsl/tutorials/gui-apps</a>
  </p>
 </li>
 <li>
  <p>
   <a class="external-link" href="https://youtrack.jetbrains.com/issue/IDEA-286059/IDE-freezes-and-hangs-202131-on-indexing-of-WSL-project#focus=Comments-27-6150691.0-0" rel="nofollow">https://youtrack.jetbrains.com/issue/IDEA-286059/IDE-freezes-and-hangs-202131-on-indexing-of-WSL-project#focus=Comments-27-6150691.0-0</a>
  </p>
 </li>
 <li>
  <p>
   <a class="external-link" data-card-appearance="inline" href="https://logmi.jp/tech/articles/326106" rel="nofollow">https://logmi.jp/tech/articles/326106</a>
  </p>
 </li>
 <li>
  <p>
   <a class="external-link" href="https://astherier.com/blog/2021/07/windows11-wsl2-wslg-japanese/" rel="nofollow">https://astherier.com/blog/2021/07/windows11-wsl2-wslg-japanese/</a>
  </p>
 </li>
</ul>
<p></p>
<h1 id="Investigations-WSL2-References">
 References
</h1>

