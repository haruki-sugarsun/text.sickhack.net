---
layout: single
title: "Hobby - Brainux"
date: "2022-08-25T03:10:03.828Z"
toc: true
toc_sticky: true
tags:
---
<p></p>
<ul>
 <li>
  <p>
   <a class="external-link" data-card-appearance="inline" href="https://wiki.brainux.org/for%20beginners/beginner-get-started/" rel="nofollow">https://wiki.brainux.org/for%20beginners/beginner-get-started/</a>
  </p>
 </li>
 <li>
  <p>
   Trying with <code>G5200</code>
  </p>
  <ul>
   <li>
    <p>
     Install <a class="external-link" data-card-appearance="inline" href="https://www.balena.io/etcher/" rel="nofollow">https://www.balena.io/etcher/</a>
    </p>
   </li>
   <li>
    <p>
     Download sdimage from <a class="external-link" data-card-appearance="inline" href="https://github.com/brain-hackers/buildbrain/releases" rel="nofollow">https://github.com/brain-hackers/buildbrain/releases</a>
    </p>
   </li>
   <li>
    <p>
     Screen Brightness issue…
    </p>
    <ul>
     <li>
      <p>
       <a class="external-link" data-card-appearance="inline" href="https://askubuntu.com/questions/149054/how-to-change-lcd-brightness-from-command-line-or-via-script" rel="nofollow">https://askubuntu.com/questions/149054/how-to-change-lcd-brightness-from-command-line-or-via-script</a>
      </p>
     </li>
     <li>
      <p>
       write to <code>brightness</code> device.
      </p>
     </li>
    </ul>
   </li>
   <li>
    <p>
     Wired LAN just works with
    </p>
    <ul>
     <li>
      <p>
       RouteAr OTG USB adapter.
      </p>
     </li>
    </ul>
   </li>
   <li>
    <p>
     WiFi module
    </p>
    <ul>
     <li>
      <p>
       device WDC-150SU2MBK
      </p>
     </li>
     <li>
      <p>
       tested on Windows 11
      </p>
      <ul>
       <li>
        <p>
         <span><img src="/c_attachments/586678273/image-20220818-122848.png"></span>
        </p>
        <p></p>
        <p>
         RTL8188eu
        </p>
        <span><img src="/c_attachments/586678273/image-20220818-123245.png"></span>
        <p></p>
        <ul>
         <li>
          <p></p>
         </li>
         <li>
          <p>
           <span><img src="/c_attachments/586678273/image-20220818-123309.png"></span>
          </p>
          <p></p>
          <p></p>
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <a class="external-link" data-card-appearance="inline" href="https://knowledge.sayabo.com/2022-03-12/set-up-the-usb-wi-fi-elecom-wdc-150su2mbk-on-ubuntu-18-04-for-lan/" rel="nofollow">https://knowledge.sayabo.com/2022-03-12/set-up-the-usb-wi-fi-elecom-wdc-150su2mbk-on-ubuntu-18-04-for-lan/</a>
      </p>
     </li>
     <li>
      <p>
       <a class="external-link" data-card-appearance="inline" href="https://silverbirch.hateblo.jp/entry/2018/08/03/142252" rel="nofollow">https://silverbirch.hateblo.jp/entry/2018/08/03/142252</a>
      </p>
     </li>
     <li>
      <p>
       <a class="external-link" data-card-appearance="inline" href="https://knowledge.sayabo.com/2022-03-12/set-up-the-usb-wi-fi-elecom-wdc-150su2mbk-on-ubuntu-18-04-for-lan/" rel="nofollow">https://knowledge.sayabo.com/2022-03-12/set-up-the-usb-wi-fi-elecom-wdc-150su2mbk-on-ubuntu-18-04-for-lan/</a>
      </p>
     </li>
     <li>
      <p></p>
      <ul>
       <li>
        <p>
         Chipset
        </p>
        <ul>
         <li>
          <p>
           RTL8192CU
          </p>
          <ul>
           <li>
            <p>
             <a class="external-link" data-card-appearance="inline" href="https://askubuntu.com/questions/246236/compile-and-install-rtl8192cu-driver/395826#395826" rel="nofollow">https://askubuntu.com/questions/246236/compile-and-install-rtl8192cu-driver/395826#395826</a>
            </p>
           </li>
          </ul>
         </li>
         <li>
          <p>
           rtl8188eu ← maybe this is correct.
          </p>
          <ul>
           <li>
            <p>
             <a class="external-link" data-card-appearance="inline" href="https://kinacon.hatenablog.com/entry/2018/08/21/145014" rel="nofollow">https://kinacon.hatenablog.com/entry/2018/08/21/145014</a>
            </p>
           </li>
           <li>
            <p>
             <a class="external-link" data-card-appearance="inline" href="https://silverbirch.hateblo.jp/entry/2018/08/03/142252" rel="nofollow">https://silverbirch.hateblo.jp/entry/2018/08/03/142252</a>
            </p>
           </li>
           <li>
            <p>
             Latest Linux has <a class="external-link" data-card-appearance="inline" href="https://github.com/torvalds/linux/blob/abfecb39092029c42c79bacac3d1c96a133ff231/drivers/staging/r8188eu/Kconfig" rel="nofollow">https://github.com/torvalds/linux/blob/abfecb39092029c42c79bacac3d1c96a133ff231/drivers/staging/r8188eu/Kconfig</a>
            </p>
           </li>
           <li>
            <p>
             but not in Brainux
            </p>
           </li>
           <li>
            <p>
             so need <a class="external-link" data-card-appearance="inline" href="https://github.com/lwfinger/rtl8188eu" rel="nofollow">https://github.com/lwfinger/rtl8188eu</a> ?
            </p>
           </li>
          </ul>
         </li>
        </ul>
       </li>
      </ul>
     </li>
     <li>
      <p>
       <a class="external-link" data-card-appearance="inline" href="https://linuxparadise.net/archives/6950" rel="nofollow">https://linuxparadise.net/archives/6950</a>
      </p>
     </li>
     <li>
      <p>
       <a class="external-link" data-card-appearance="inline" href="https://izumisy.work/entry/2020/08/02/194006" rel="nofollow">https://izumisy.work/entry/2020/08/02/194006</a>
      </p>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<h2 id="Hobby-Brainux-BuildingDriver">
 Building Driver
</h2>
<ul>
 <li>
  <p>
   <a class="external-link" data-card-appearance="inline" href="https://github.com/lwfinger/rtl8188eu" rel="nofollow">https://github.com/lwfinger/rtl8188eu</a>
  </p>
 </li>
 <li>
  <p>
   <a class="external-link" data-card-appearance="inline" href="https://unix.stackexchange.com/questions/83319/where-are-the-current-kernel-build-options-stored" rel="nofollow">https://unix.stackexchange.com/questions/83319/where-are-the-current-kernel-build-options-stored</a>
  </p>
  <ul>
   <li>
    <p>
     <code>zcat /proc/config.gz</code>
    </p>
    <ul>
     <li>
      <p>
       no CONFIG_WIRELESS_EXT found?
      </p>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a class="external-link" data-card-appearance="inline" href="http://nahitafu.cocolog-nifty.com/nahitafu/2019/09/post-d45021.html" rel="nofollow">http://nahitafu.cocolog-nifty.com/nahitafu/2019/09/post-d45021.html</a>
  </p>
 </li>
 <li>
  <p>
   Use linux source from + rtl8288eu source
  </p>
  <ul>
   <li>
    <p>
     Also learning from <a class="external-link" data-card-appearance="inline" href="http://nahitafu.cocolog-nifty.com/nahitafu/2019/09/post-d45021.html" rel="nofollow">http://nahitafu.cocolog-nifty.com/nahitafu/2019/09/post-d45021.html</a>
    </p>
   </li>
   <li>
    <p>
     with `buildbrain`
    </p>
   </li>
   <li>
    <p>
     <code>make ldefconfig</code>
    </p>
    <ul>
     <li>
      <p>
       required by <code>getcross linux</code>
      </p>
     </li>
     <li>
      <div>
       <div>
        <pre>$ ./tools/getcross linux
arm-linux-gnueabi-</pre>
       </div>
      </div>
      <p></p>
     </li>
    </ul>
   </li>
   <li>
    <p>
     <code>make lbuild</code>
    </p>
   </li>
   <li>
    <p></p>
   </li>
   <li>
    <div>
     <div>
      <pre>$ make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- KSRC=/home/sugarsun/public_git/buildbrain/linux-brain</pre>
     </div>
    </div>
    <p></p>
   </li>
  </ul>
 </li>
 <li>
  <p>
   Ended with errors like
  </p>
  <ul>
   <li>
    <div>
     <div>
      <pre>error: ‘struct iw_handler_def’ has no member named ‘private’
  .private = rtw_private_handler,
....</pre>
     </div>
    </div>
   </li>
   <li>
    <p>
     → <a class="external-link" data-card-appearance="inline" href="https://github.com/lwfinger/rtl8188eu/issues/330" rel="nofollow">https://github.com/lwfinger/rtl8188eu/issues/330</a>
    </p>
   </li>
   <li>
    <p>
     Ah, CONFIG_WIRELESS_EXT needs to be specified explicitly…
    </p>
   </li>
   <li>
    <p>
     Trying enable it
    </p>
    <ul>
     <li>
      <p>
       and <code>RTL8XXXU_UNTESTED</code> can be interesting too?
      </p>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   So need to build Brainux kernel!
  </p>
  <ul>
   <li>
    <p>
     <a class="external-link" data-card-appearance="inline" href="https://wiki.brainux.org/linux/linux-build/" rel="nofollow">https://wiki.brainux.org/linux/linux-build/</a>
    </p>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a class="external-link" data-card-appearance="inline" href="https://www.spinics.net/lists/newbies/msg47812.html" rel="nofollow">https://www.spinics.net/lists/newbies/msg47812.html</a>
  </p>
  <ul>
   <li>
    <p>
     &gt;        &lt;M&gt;   Realtek RTL8188EU Wireless LAN NIC driver
    </p>
   </li>
   <li>
    <p>
     might be suitable
    </p>
   </li>
   <li>
    <p>
     so use <code>make ARCH=arm -C linux-brain menuconfig</code>
    </p>
    <ul>
     <li>
      <div>
       <div>
        <pre>$ diff .config .config.old
688d687
&lt; CONFIG_WIRELESS_EXT=y
691d689
&lt; CONFIG_WEXT_PRIV=y
701,704d698
&lt; CONFIG_LIB80211=m
&lt; CONFIG_LIB80211_CRYPT_WEP=m
&lt; CONFIG_LIB80211_CRYPT_CCMP=m
&lt; # CONFIG_LIB80211_DEBUG is not set
3014,3015c3008
&lt; CONFIG_R8188EU=m
&lt; CONFIG_88EU_AP_MODE=y
---
&gt; # CONFIG_R8188EU is not set</pre>
       </div>
      </div>
      <p></p>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   We need to be aware of
  </p>
  <ul>
   <li>
    <div>
     <div>
      <pre>case "${CONFIG_CPU_ARM926T}_${CONFIG_ARCH_MULTI_V7}" in
</pre>
     </div>
    </div>
    <p>
     as well.
    </p>
   </li>
  </ul>
 </li>
 <li>
  <p>
   Next error…
  </p>
  <ul>
   <li>
    <div>
     <div>
      <pre>  Building modules, stage 2.
  MODPOST 1 modules
ERROR: "register_netdevice" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "strpbrk" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "find_vpid" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "dev_get_by_name" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "down_interruptible" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "strsep" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "__pskb_pull_tail" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "strncpy" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "strncmp" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "kill_pid" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "init_net" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "unregister_netdevice_queue" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "__csum_ipv6_magic" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "up" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "csum_partial" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
ERROR: "rtnl_is_locked" [/home/sugarsun/public_git/rtl8188eu/8188eu.ko] undefined!
s</pre>
     </div>
    </div>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a class="external-link" data-card-appearance="inline" href="https://github.com/lwfinger/rtl8188eu/issues/200" rel="nofollow">https://github.com/lwfinger/rtl8188eu/issues/200</a>
  </p>
 </li>
 <li>
  <p>
   investigating
  </p>
  <ul>
   <li>
    <p>
     <a class="external-link" href="https://www.linuxquestions.org/questions/linux-newbie-8/compiling-module-gives-modpost-error-unknown-symbol-4175673785/" rel="nofollow">Compiling module gives MODPOST Error (Unknown Symbol) (linuxquestions.org)</a>
    </p>
   </li>
   <li>
    <p>
     <a class="external-link" data-card-appearance="inline" href="https://all.rentafree.info/entry/962639" rel="nofollow">https://all.rentafree.info/entry/962639</a>
    </p>
   </li>
   <li>
    <p></p>
   </li>
   <li>
    <p>
     Can fixing the <code>_OS_INTFS_FILES</code> help?
    </p>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <a class="external-link" data-card-appearance="inline" href="https://qiita.com/ikwzm/items/0aa165fa21fa9cca15c0" rel="nofollow">https://qiita.com/ikwzm/items/0aa165fa21fa9cca15c0</a>  ???? related?
  </p>
  <ul>
   <li>
    <p>
     oops ARCH was a bit different..
    </p>
    <ul>
     <li>
      <p>
       → fix?
      </p>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   Looks similar but no solution.
  </p>
  <ul>
   <li>
    <p>
     <a class="external-link" data-card-appearance="inline" href="https://all.rentafree.info/entry/962639" rel="nofollow">https://all.rentafree.info/entry/962639</a>
    </p>
   </li>
  </ul>
 </li>
 <li>
  <p>
   Seems <a class="external-link" data-card-appearance="inline" href="https://github.com/lwfinger/rtl8188eu/tree/v5.2.2.4" rel="nofollow">https://github.com/lwfinger/rtl8188eu/tree/v5.2.2.4</a>  actually Kernel build approach?
  </p>
  <ul>
   <li>
    <p>
     <a class="external-link" data-card-appearance="inline" href="https://debimate.jp/2019/07/15/linux-kernel-tree%E5%86%85%E3%81%A7%E8%87%AA%E4%BD%9Ckernel%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%92%E3%83%93%E3%83%AB%E3%83%89%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95makefile%E3%81%A8kconfi/" rel="nofollow">https://debimate.jp/2019/07/15/linux-kernel-tree%E5%86%85%E3%81%A7%E8%87%AA%E4%BD%9Ckernel%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%82%92%E3%83%93%E3%83%AB%E3%83%89%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95makefile%E3%81%A8kconfi/</a>
    </p>
   </li>
  </ul>
 </li>
 <li>
  <p>
   Related… ? <a class="external-link" data-card-appearance="inline" href="https://patchwork.kernel.org/project/linux-kbuild/patch/20171002105004.32426-1-jonas.gorski@gmail.com/" rel="nofollow">https://patchwork.kernel.org/project/linux-kbuild/patch/20171002105004.32426-1-jonas.gorski@gmail.com/</a>
  </p>
  <ul>
   <li>
    <p>
     → YES!!
    </p>
   </li>
  </ul>
 </li>
 <li>
  <p>
   misc:
  </p>
  <ul>
   <li>
    <p>
     SSL cert expiration error
    </p>
    <ul>
     <li>
      <p>
       <a class="external-link" data-card-appearance="inline" href="https://stackoverflow.com/questions/26157895/ignore-ssl-certificate-error-with-wget" rel="nofollow">https://stackoverflow.com/questions/26157895/ignore-ssl-certificate-error-with-wget</a>
      </p>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li>
  <p>
   and …. coming back to Brainux image building
  </p>
  <ul>
   <li>
    <p>
     seems it’s automated as <a class="external-link" data-card-appearance="inline" href="https://github.com/brain-hackers/buildbrain#bootstrap-debian-11-bullseye" rel="nofollow">https://github.com/brain-hackers/buildbrain#bootstrap-debian-11-bullseye</a>
    </p>
   </li>
   <li>
    <p>
     but it depends on <a class="external-link" data-card-appearance="inline" href="https://packages.debian.org/bullseye/dosfstools" rel="nofollow">https://packages.debian.org/bullseye/dosfstools</a>  ??
    </p>
    <ul>
     <li>
      <div>
       <div>
        <pre>The following NEW packages will be installed:
  dosfstools
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.
Need to get 142 kB of archives.
After this operation, 323 kB of additional disk space will be used.
Get:1 http://deb.debian.org/debian bullseye/main amd64 dosfstools amd64 4.2-1 [142 kB]
Fetched 142 kB in 1s (276 kB/s)
Selecting previously unselected package dosfstools.
(Reading database ... 37775 files and directories currently installed.)
Preparing to unpack .../dosfstools_4.2-1_amd64.deb ...
Unpacking dosfstools (4.2-1) ...
Setting up dosfstools (4.2-1) ...
Processing triggers for man-db (2.9.4-2) ...
----- 1. Brainux Image / https://wiki.brainux.org/linux/linux-build/
----- 2. rtl8188eu driver / https://github.com/lwfinger/rtl8188eu
----- Build phase.
----- 1-0. Patch Brainux
</pre>
       </div>
      </div>
      <p>
       It worked!!
      </p>
     </li>
    </ul>
   </li>
   <li>
    <p>
     make brainux issues…
    </p>
    <ul>
     <li>
      <div>
       <div>
        <pre>+ mkdir -p /etc/apt/keyrings
+ curl -fsSL https://packagecloud.io/brainhackers/brainux/gpgkey
+ gpg --dearmor
curl: (77) error setting certificate verify locations:  CAfile: /etc/ssl/certs/ca-certificates.crt CApath: /etc/ssl/certs
gpg: no valid OpenPGP data found.
make: *** [Makefile:145: brainux] Error 2
</pre>
       </div>
      </div>
      <p></p>
     </li>
     <li>
      <p>
       So I retried with commenting out <code>/debootstrap/debootstrap --second-stage</code>` to continue the setup..
      </p>
      <ul>
       <li>
        <p>
         and insert
        </p>
        <ul>
         <li>
          <div>
           <div>
            <pre>### Haruki mod
DEBIAN_FRONTEND=noninteractive \
    apt reinstall -y ca-certificates
</pre>
           </div>
          </div>
         </li>
         <li>
          <p>
           <a class="external-link" data-card-appearance="inline" href="https://askubuntu.com/questions/1390288/curl-77-error-setting-certificate-verify-locations-ubuntu-20-04-3-lts" rel="nofollow">https://askubuntu.com/questions/1390288/curl-77-error-setting-certificate-verify-locations-ubuntu-20-04-3-lts</a>
          </p>
         </li>
        </ul>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p></p>
<h2 id="Hobby-Brainux-Anotheroption">
 Another option
</h2>
<ul>
 <li>
  <p>
   use some devices already included?
  </p>
  <ul>
   <li>
    <p>
     <a class="external-link" data-card-appearance="inline" href="https://www.google.co.jp/search?q=RTL8192CU&amp;btnI=i_love_im_feeling_lucky" rel="nofollow">https://www.google.co.jp/search?q=RTL8192CU&amp;btnI=i_love_im_feeling_lucky</a>
    </p>
   </li>
   <li>
    <p>
     <a class="external-link" data-card-appearance="inline" href="https://www.iodata.jp/product/network/adp/wn-g300ua/" rel="nofollow">https://www.iodata.jp/product/network/adp/wn-g300ua/</a>
    </p>
   </li>
   <li>
    <p></p>
   </li>
  </ul>
 </li>
</ul>

